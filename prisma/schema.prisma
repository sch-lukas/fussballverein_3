generator client {
  provider        = "prisma-client"
  output          = "../src/generated/prisma"
  previewFeatures = ["nativeDistinct", "relationJoins"]
  engineType      = "client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["fussballverein"]
}

/// Hauptentit√§t: Fussballverein
model Fussballverein {
  id               Int        @id @default(autoincrement())
  name             String
  gruendungsdatum  DateTime?  @db.Date
  website          String?
  email            String?
  telefonnummer    String?
  mitgliederanzahl Int?
  version          Int        @default(0)
  erzeugt          DateTime   @default(now()) @db.Timestamp(6)
  aktualisiert     DateTime   @default(now()) @updatedAt @db.Timestamp(6)
  logo_file        logo_file?
  spieler          Spieler[]
  stadion          Stadion?

  @@map("fussballverein")
  @@schema("fussballverein")
}

/// Spieler (1:n Beziehung)
model Spieler {
  id               Int            @id @default(autoincrement())
  vorname          String
  nachname         String
  alter            Int?
  starkerFuss      String?        @map("starker_fuss")
  fussballvereinId Int            @map("fussballverein_id")
  fussballverein   Fussballverein @relation(fields: [fussballvereinId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([fussballvereinId])
  @@map("spieler")
  @@schema("fussballverein")
}

/// Stadion (1:1 Beziehung)
model Stadion {
  id               Int            @id @default(autoincrement())
  stadt            String
  strasse          String?
  hausnummer       String?
  kapazitaet       Int
  fussballvereinId Int            @unique @map("fussballverein_id")
  fussballverein   Fussballverein @relation(fields: [fussballvereinId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([fussballvereinId])
  @@map("stadion")
  @@schema("fussballverein")
}

model logo_file {
  id                Int            @id @default(autoincrement())
  data              Bytes
  filename          String
  mimetype          String?
  fussballverein_id Int            @unique
  fussballverein    Fussballverein @relation(fields: [fussballverein_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([fussballverein_id])
  @@schema("fussballverein")
}
